





class_name();
function class_name(){

   

    let sendingData = {
        "action" : "class_read"
    }

    $.ajax( {
        method: "POST",
        dataType: "JSON",
        url : "../API/class.php",
        data : sendingData,
        success: function(data){

            let status = data.status;
            let response = data.data;
            let html = '';
            let tr = '';

            if(status){

              //  if(res  == 'department_name'  ) {

                
                response.forEach( res => {

                   html += `<option value="${res['student_id']}">${res['class_name']}</option>`;
                })

                $("#class_id").append(html);
           // }
              
            }else{
                alert("error",response);
            }
           

        },
        error: function(data){

        }
    })

}




Department_name();
function Department_name(){

   

    let sendingData = {
        "action" : "department_read"
    }

    $.ajax( {
        method: "POST",
        dataType: "JSON",
        url : "../Api/department.php",
        data : sendingData,
        success: function(data){

            let status = data.status;
            let response = data.data;
            let html = '';
            let tr = '';

            if(status){

                
                response.forEach( res => {

                   html += `<option value="${res['student_id']}">${res['department_name']}</option>`;
                })

                $("#department_id").append(html);

              
            }else{
                alert("error",response);
            }
           

        },
        error: function(data){

        }
    })

}



$('#search').keyup(function(){
    var input=$(this).val();
    if(input.trim() === ""){


   
    loadData();
}
else{
    $.ajax({
        method:'POST',
    
        url:'../Api/search.php',
        data:{user_name:input},
        success:function(response){
            $("#student-table").html(response);

        }
    })
}
})








// ...........
loadData();
function loadData(){

    $("#student-table tbody").html('');

    let sendingData = {
        "action" : "studensread"
    }

    $.ajax( {
        method: "POST",
        dataType: "JSON",
        url : "../API/studentview.php",
        data : sendingData,
        success: function(data){

            let status = data.status;
            let response = data.data;
            let html = '';
            let tr = '';
                  console.log(response);
    
            if(status){

                response.forEach( itm => {

                    tr += "<tr>";
                    for(let i in itm){
                        // console.log(itm);

                      
                            tr += `<td>${itm[i]}</td>`;
                        }

                    

                        tr += `<td > <buttonclass="btn_upda"> <a class="updete_cl"update_id=${itm['id']}><span class="material-symbols-outlined" style ="color:#fff;background-color:black; font-size: xx-large;  font-weight: bold; border-radius: 5px; ">edit
                        </span></a></button> &nbsp;&nbsp;<a class="delete_cl" delete_id=${itm['id']}><span class="material-symbols-outlined" style ="color:#fff;background-color:red;font-size: xx-large;  font-weight: bold; border-radius: 5px;">delete
                        </span></a> </td>` 
                       
                        tr += '</tr>'  

                })

                $("#student-table tbody").append(tr);

            }else{
                console.log("error",response);
            }
           

        },
        error: function(data){
            console.log(data);

        }
    })

}






